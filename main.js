(()=>{"use strict";var t={d:(e,a)=>{for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{d:()=>c,f:()=>d});class e{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;this.length=t,this.hits=0}hit(){return this.hits++,this}isSunk(){return this.hits>=this.length}}class a{constructor(){this.board=Array.from({length:10},(()=>Array(10).fill(""))),this.shipCount=0}placeShip(t,a,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=new e(t);if(i){if(a+o.length-1>9&&(a=9-o.length+1),!this.checkAvailability(a,n,o.length,i))return!1;for(let t=0;t<o.length;t++)this.board[n][a+t]=o}else{if(n+o.length-1>9&&(n=9-o.length+1),!this.checkAvailability(a,n,o.length,i))return!1;for(let t=0;t<o.length;t++)this.board[n+t][a]=o}return this.shipCount++,!0}checkAvailability(t,a,n){if(arguments.length>3&&void 0!==arguments[3]&&!arguments[3]){for(let i=0;i<n;i++)if(this.board[a+i][t]instanceof e)return!1}else for(let i=0;i<n;i++)if(this.board[a][t+i]instanceof e)return!1;return!0}receiveAttack(t,a){if("x"==this.board[a][t])return!1;if(this.board[a][t]instanceof e){let e=this.board[a][t];e.hit(),e.isSunk()&&this.shipCount--}return this.board[a][t]="x",!0}}class n{constructor(t){this.name=t,this.turn=!0,this.board=new a}toggleTurn(){this.turn=!this.turn}attack(t,e,a){return t.board.receiveAttack(e,a)}placeTitan(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.floor(10*Math.random()),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.floor(10*Math.random()),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Boolean(Math.floor(2*Math.random()));return!!this.board.placeShip(5,t,e,a)||this.placeTitan()}placeMiniTitan(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.floor(10*Math.random()),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.floor(10*Math.random()),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Boolean(Math.floor(2*Math.random()));return!!this.board.placeShip(4,t,e,a)||this.placeMiniTitan()}placeNormalShip(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.floor(10*Math.random()),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.floor(10*Math.random()),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Boolean(Math.floor(2*Math.random()));return!!this.board.placeShip(3,t,e,a)||this.placeNormalShip()}placeSmallestShip(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.floor(10*Math.random()),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.floor(10*Math.random()),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Boolean(Math.floor(2*Math.random()));return!!this.board.placeShip(2,t,e,a)||this.placeSmallestShip()}}class i extends n{constructor(){super("computer"),this.attacks=Array.from({length:100},((t,e)=>e))}attack(t){let e=Math.floor(Math.random()*this.attacks.length);var a=this.attacks[e];let n=a%10,i=(a-n)/10;return t.board.receiveAttack(n,i),this.attacks.splice(e,1),{x:n,y:i}}}let o=document.getElementById("content");function r(t,e){let a=document.createElement("div");a.classList.add(`${t.name}`),a.classList.add("board"),o.append(a);for(let n=0;n<=9;n++)l(t,a,n,e)}function l(t,e,a,n){let i=document.createElement("div");i.classList.add("row"),e.append(i);for(let e=0;e<=9;e++)h(t,i,a,e,n)}function h(t,a,n,o,r){let h=document.createElement("div");h.classList.add("cell"),a.append(h);let s=t.board.board[n][o];if("x"==s)return h.classList.add("npc-hit"),h;t instanceof i?h.addEventListener("click",(()=>{r.attack(t,o,n)&&(s instanceof e?(h.classList.add("destroyed"),d(t,r)):h.classList.add("missed"),function(t,e){t.attack(e),d(t,e);let a=document.querySelector(`.board.${e.name}`);a.innerHTML="",function(t,e,a){for(let n=0;n<=9;n++)l(e,t,n,a)}(a,e,t)}(t,r))})):s instanceof e&&h.classList.add("ship")}function s(t){o.innerHTML="",o.innerHTML=`<div class="end-game"><p> ${t} WON!</p> <button>play again </div>`,o.querySelector("button").addEventListener("click",(()=>{o.innerHTML="",c()}))}function c(){let t=new n("YOU"),e=new i;t.placeTitan(),t.placeMiniTitan(),t.placeNormalShip(),t.placeSmallestShip(),e.placeTitan(),e.placeMiniTitan(),e.placeNormalShip(),e.placeSmallestShip(),r(t,e),r(e,t)}function d(t,e){return 0==t.board.shipCount?(s(e.name),!0):0==e.board.shipCount&&(s(t.name),!0)}c()})();